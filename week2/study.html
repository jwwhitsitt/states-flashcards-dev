<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Week 2 – Study Flashcards</title>

  <style>
    :root{
      --bg:#f4f6fb;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --shadow:0 10px 30px rgba(15,23,42,.12);
      --radius:18px;
      --link:#1d4ed8;
      --btn:#0f172a;
      --btn2:#e5e7eb;
      --btn2text:#111827;

      /* NEW: layout tuning (responsive) */
      --topbarH: 56px;
      --pagePad: clamp(10px, 2.4vw, 14px);
      --panelPad: clamp(10px, 2.6vw, 14px);
      --gap: clamp(8px, 2vw, 12px);
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);

      /* CHANGED: better mobile viewport behavior */
      height:100svh;
      display:flex;
      flex-direction:column;

      overflow:hidden; /* no page scroll */
    }

    header{
      flex:0 0 auto;
      height:var(--topbarH);
      padding:10px var(--pagePad);
      background:#fff;
      box-shadow:0 1px 10px rgba(0,0,0,.06);
      display:flex;
      align-items:center;
      gap:10px;
    }
    header a{
      text-decoration:none;
      color:var(--link);
      font-weight:900;
      white-space:nowrap;
    }
    header h1{
      margin:0;
      font-size:16px;
      font-weight:1000;
      text-align:center;
      flex:1;
    }
    header .spacer{ width:52px; }

    main{
      flex:1 1 auto;
      min-height:0;
      display:flex;
      justify-content:center;
      align-items:stretch;

      /* CHANGED: responsive padding + safe area */
      padding:var(--pagePad);
      padding-bottom:calc(var(--pagePad) + env(safe-area-inset-bottom, 0px));

      overflow:hidden;
    }

    .wrap{
      width:100%;
      max-width:760px; /* slightly wider so the card can feel "week 1 big" */
      min-height:0;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:var(--gap);
    }

    /* big outer card */
    .panel{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);

      /* CHANGED: responsive padding */
      padding:var(--panelPad);

      display:flex;
      flex-direction:column;
      gap:var(--gap);
      overflow:hidden;

      /* NEW: ensure panel doesn't exceed available height */
      min-height:0;
    }

    /* 3D flip scene */
    .scene{
      width:100%;

      /*
        CHANGED: let the card take as much height as possible
        without pushing controls off-screen.
      */
      height: min(62svh, 520px);
      min-height: clamp(220px, 42svh, 340px);

      perspective:1200px;
      display:flex;
      align-items:center;
      justify-content:center;
      user-select:none;

      /* NEW: allow the scene to shrink inside the panel */
      min-height:0;
    }

    .flip{
      width:100%;
      height:100%;

      /* CHANGED: allow bigger card on big screens */
      max-width: min(680px, 100%);

      position:relative;
      transform-style:preserve-3d;
      transition:transform .55s cubic-bezier(.2,.8,.2,1);
      border-radius:20px;
      cursor:pointer;
    }
    .flip.is-flipped{
      transform:rotateY(180deg);
    }

    .face{
      position:absolute;
      inset:0;
      backface-visibility:hidden;
      -webkit-backface-visibility:hidden;
      border-radius:20px;
      overflow:hidden;
      background:#fff;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.06);
      display:flex;
      align-items:center;
      justify-content:center;

      /* CHANGED: slightly tighter padding so image is bigger */
      padding:8px;
    }

    .face img{
      width:100%;
      height:100%;
      object-fit:contain;
      border-radius:14px;
    }

    .back{
      transform:rotateY(180deg);
    }

    /* small hint text */
    .hint{
      text-align:center;
      color:var(--muted);
      font-weight:800;

      /* CHANGED: responsive size + tighter spacing */
      font-size: clamp(12px, 2.8vw, 13px);
      margin-top:-2px;
    }

    /* controls */
    .controls{
      display:flex;
      gap:10px;
    }

    .btn{
      flex:1;

      /* CHANGED: responsive padding & text size (bigger on big screens, safe on small) */
      padding: clamp(10px, 2.8vw, 14px) clamp(12px, 3.2vw, 16px);
      border-radius:14px;
      border:0;
      font-size: clamp(14px, 3.6vw, 16px);
      font-weight:1000;
      cursor:pointer;
      background:var(--btn);
      color:#fff;
      box-shadow:0 10px 20px rgba(0,0,0,.10);
    }

    .btn.secondary{
      background:var(--btn2);
      color:var(--btn2text);
      box-shadow:none;
    }

    .btn:disabled{
      opacity:.45;
      cursor:not-allowed;
      box-shadow:none;
    }

    .meta{
      text-align:center;
      color:var(--muted);
      font-weight:900;
      font-size: clamp(12px, 3.2vw, 14px);
      margin-top:-2px;
    }

    /* Short screens (iPhone SE-ish): keep everything on screen */
    @media (max-height: 700px){
      :root{ --topbarH: 52px; }

      .scene{
        height: min(56svh, 420px);
        min-height: 220px;
      }

      .hint{
        font-size:12px;
      }
    }

    /* Very short screens: shrink just a bit more to avoid any cutoff */
    @media (max-height: 620px){
      .scene{
        height: min(52svh, 380px);
        min-height: 210px;
      }
      .controls{ gap:8px; }
      .btn{ border-radius:12px; }
    }
  </style>
</head>

<body>
  <header>
    <a href="./index.html">← Back</a>
    <h1>Study Flashcards</h1>
    <div class="spacer"></div>
  </header>

  <main>
    <div class="wrap">
      <section class="panel">
        <div class="scene" aria-label="Flashcard">
          <div class="flip" id="flipCard" role="button" aria-label="Tap to flip the card" tabindex="0">
            <div class="face front">
              <img id="frontImg" alt="Flashcard front" />
            </div>
            <div class="face back">
              <img id="backImg" alt="Flashcard back" />
            </div>
          </div>
        </div>

        <div class="hint">Tap the card (or Flip) to turn it over.</div>

        <div class="controls">
          <button class="btn secondary" id="backBtn">Back</button>
          <button class="btn secondary" id="flipBtn">Flip</button>
          <button class="btn" id="nextBtn">Next</button>
        </div>

        <div class="meta" id="metaText">Card 1 of 4</div>
      </section>
    </div>
  </main>

  <script>
    // Week 2 set — update here if you change the lesson later
    const CARDS = [
      { key:"pa" }, // pa-f.png / pa-b.png
      { key:"nj" },
      { key:"ny" },
      { key:"de" }
    ];

    const flipCard = document.getElementById("flipCard");
    const frontImg = document.getElementById("frontImg");
    const backImg  = document.getElementById("backImg");

    const backBtn = document.getElementById("backBtn");
    const flipBtn = document.getElementById("flipBtn");
    const nextBtn = document.getElementById("nextBtn");
    const metaText = document.getElementById("metaText");

    let i = 0;
    let flipped = false;

    function setImages(){
      const k = CARDS[i].key;
      frontImg.src = `./images/${k}-f.png`;
      backImg.src  = `./images/${k}-b.png`;
    }

    function setMeta(){
      metaText.textContent = `Card ${i + 1} of ${CARDS.length}`;
      backBtn.disabled = (i === 0);
      nextBtn.disabled = (i === CARDS.length - 1);
    }

    function setFlip(state){
      flipped = state;
      flipCard.classList.toggle("is-flipped", flipped);
    }

    function flip(){
      setFlip(!flipped);
    }

    function next(){
      if(i >= CARDS.length - 1) return;
      i++;
      setFlip(false);
      setImages();
      setMeta();
    }

    function prev(){
      if(i <= 0) return;
      i--;
      setFlip(false);
      setImages();
      setMeta();
    }

    // Click card to flip
    flipCard.addEventListener("click", flip);

    // Keyboard accessibility (enter/space flips)
    flipCard.addEventListener("keydown", (e) => {
      if(e.key === "Enter" || e.key === " "){
        e.preventDefault();
        flip();
      }
    });

    flipBtn.addEventListener("click", flip);
    nextBtn.addEventListener("click", next);
    backBtn.addEventListener("click", prev);

    // init
    setImages();
    setMeta();
    setFlip(false);
  </script>
</body>
</html>